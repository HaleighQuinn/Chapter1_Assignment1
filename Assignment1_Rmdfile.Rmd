---
title: "Assignment1"
author: "Haleigh Quinn"
date: "9/18/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


# Reading a File, Option 1: 

```{r}
library(tidyverse)

health_full <- read_csv("https://chronicdata.cdc.gov/api/views/6vp6-wxuq/rows.csv?accessType=DOWNLOAD")
```
View(health_full)
# Filter results to only California
health_ca <- filter(health_full, StateAbbr == "CA")
# Reading a File, Option 2:
pge_19_q4_elec <- read_csv("PGE_2019_Q4_ElectricUsageByZip.csv")
rm(pge_19_q1_elec)
# Saving Outputs:
  #Creating CSV file: 
  write_csv(health_ca, "health_ca.csv")
  saveRDS(health_ca, "health_ca.rds")
# Reading RDS Files: 
  health_ca <- readRDS("health_ca.rds")

# Saving Environment Variables as rda file: 
save(health_ca, pge_19_q4_elec, file = "working_datasets.rda") 
  You can list as many variables as you need in the save() function
  
  To read the rda file: load(filename)
  load("working_datasets.rda")
  
# Saving the entire environment: 
<!-- save.image("progress1.rda") --> This is now commented out so that there can be no changes made to the contents of the rda file. 
load("progress1.rda")

# For Loops: 
For loops are written with the following structure: for(dummy_variable_name in range_of_real_objects)
{code_to_execute}


```{r}
library(tidyverse)
```
year <- 2019

quarters <- 1:4 
  "quarters" is the variable that holds each integer consecutively as the script within the loop is executed 4 times. 
  
type <- "Electric"

pge_19_elec <- NULL #This creates a placeholder variable that is ready for the first iteration of the loop. 

for(quarter in quarters) {
  
  filename <- 
    paste0(
      "PGE_",
      year,
      "_Q",
      quarter,
      "_",
      type,
      "UsageByZip.csv"
    )

  print(filename) 
  #This displays the value of the filename variable 4 times in the consolue as you run the loop. 
  #If you have to run through thousands of loops, you could use "row", and write if(row %% 100) print(row). This method only prints rows divisible by 100. 
  #paste0() allows you to create strings fragments separated by commas, and will leave no spaces between them. 
  
  
  temp <- read_csv(filename)
  
  pge_19_elec <- rbind(pge_19_elec,temp)
  
  # Note rbind requires field names to be consistent for every new thing that you add.
  rbind() stacks two dataframes that share the same column names. 

  saveRDS(pge_19_elec, "pge_19_elec.rds")
} #saveRDS() saves the pancake at each stage of the loop. 
View(pge_19_elec)
# Manipulation Data: 
```{r}
library(tidyverse)
```
pge_filter <- filter(pge_19_elec, CUSTOMERCLASS %in% c("Elec- Residential", "Elec- Commercial"))
  - %in%: "membership in"
  - c(): quickly creates vectors of elements, which, in this case, are two candidate values for CUSTOMERCLASS. 
  - 